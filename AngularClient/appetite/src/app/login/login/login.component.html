<h1 class="title">Login</h1>

<form class="general-form" [formGroup]="form" (ngSubmit)="login()">
	<div class="form-row">
		<mat-form-field>
			<input
				type="email"
				name="email"
				matInput
				formControlName="email"
				placeholder="E-mail"
				autocomplete="email"
			/>
			<mat-error *ngIf="form.controls.email.hasError('required')"
				>Please input your e-mail adress</mat-error
			>
			<mat-error *ngIf="form.controls.email.hasError('email')"
				>No valid e-mail adress</mat-error
			>
		</mat-form-field>
	</div>
	<div class="form-row">
		<mat-form-field>
			<input
				type="password"
				name="password"
				matInput
				formControlName="password"
				placeholder="Password"
				autocomplete="current-password"
			/>
			<mat-error>Please input your password</mat-error>
		</mat-form-field>
	</div>

	<button
		class="login-button"
		type="submit"
		mat-flat-button
		[color]="error ? 'warn' : 'primary'"
		[disabled]="isLoading || form.invalid"
	>
		Anmelden
	</button>
	<mat-error *ngIf="error" [ngSwitch]="error?.status">
		<ng-container *ngSwitchCase="400">Login data not valid</ng-container>
		<ng-container *ngSwitchCase="500">Server error</ng-container>
		<ng-container *ngSwitchDefault>Error during login process</ng-container>
	</mat-error>
</form>

<div class="register">
	<a routerLink="/login/register">Register</a>
</div>
<div class="restaurant-login">
	<a routerLink="/login/restaurant-login">Access for restaurants</a>
</div>